
Podpora pro ostre tony (distortion 2 s aktivovanym 1.72MHz generatorem)
pres dalsi tabulku frekvenci.



V songline bude krom zacatkuuu tracku a delky i moznost ladeni
GOdb,GOhb,LEN,L1db,L1hb,L2db,L2hb,L3db,L3hb,L4db,L4hb, [R1db,R1hb,R2db,R2hb,R3db,R3hb,R4db,R4hb]
FLAG	<--00 zadne ladeni
	<--0X zmena ladeni u X kanalu. (1=>L1, 2=>L1,L2, .., 8=>L1,..,R4)
ladeniL1,ladeniL2,ladeniL3,ladeniL4,
ladeniR1,ladeniR2,ladeniR3,ladeniR4




Nebude tabulka vektoru pro tracky, ale primo v songu dvojice DB,HB.
Prvni dvojice je GO vektor (na dalsi radek nebo jinam).
A jeste je tam byte s delkou nejkratsiho tracku.

tj. 2+1+4*2=11 bytu na songline (resp. 2+1+8*2=19 bytu pri stereo)
GOdb,GOhb,LEN,L1db,L1hb,L2db,L2hb,L3db,L3hb,L4db,L4hb, [R1db,R1hb,R2db,R2hb,R3db,R3hb,R4db,R4hb]


v RMT rutine u instrumentu - parametr "trackn_tableend,x" nebude ukazovat
na posledni byte table, ale o 1 za. => nebude se muset pri inicializaci
provadet clc & adc #1 pred ulozenim do "trackn_instridx,x" (protoze uz to bude
ta posunuta hodnota) a dale se zjednodusi porovnavani konce "trackn_tableend,x".
Asi nejak takto:
ei2
;table
	ldy trackn_tableend,x
	cpy #INSTRPAR+1				;==12+1?
	beq ei3						;delka table=0 => preskoci to cele
	;speed
	lda trackn_tablespeeda,x
	bpl ei2f					;>=0  => neposunuje se v table
ei2c
	;posun table aktualniho indexu
	tya				;2cykly
	cmp trackn_tablea,x		;4cykly
	bne ei2c2			;3cykly
	IFT FEAT_TABLEGO
	lda trackn_tablelop,x		;4cyc table lop
	ELS
	lda #INSTRPAR				;vsechny loopy skacou vzdycky na 0 => pevne dany zacatek vsech loopu (12.byte)
	EIF
	sta trackn_tablea,x		;5cyc
	bne ei2a		;! vzdy  3cyc
ei2c2
	inc trackn_tablea,x		;7cyklu
ei2a
;;;	sta trackn_tablea,x	;<--zapoznamkovane!

Uspora je 6, pripadne 5 taktu (podle toho jestli je na konci table nebo ne).


Vylepsit RMT rutinu 

;y=0
	lda (nt),y
;*!*	sta trackn_tableend,x
	clc
	adc #1
	sta trackn_tableend,x	;*!* az sem! => tableend je o 1 vetsi a muze se predelat
				;na to rychlejsi porovnavani konce, viz namety_na_vylepseni
	sta trackn_instridx,x				;obalka envelope zacina 1 byte za table


BTW - slo by to obdobne i pro trackn_instrlen,x ???
Napr. 
;y=2
	lda (nt),y
	adc #1			;*!* na carry nezalezi, bud pricte 1 nebo 2 (instridx se posouva po 3)
	sta trackn_instrlen,x

...
	cmp trackn_instrlen,x
	bcc pp2
;*!*	beq pp2			;<--tohle by naopak odpadlo

Hm. Ale neni to zas az tak moc lepsi - pri kazdem SetUpInstrumentu to sebere 2 takty
navic, za to 2 takty se usetri jen u loopu ktere jsou kratke jen 1 sloupec - i kdyz zas
u tech to pak setri 2 takty pri kazdem skoku.
TAKZE SPIS NE.

